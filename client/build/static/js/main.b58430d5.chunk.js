(this.webpackJsonpkanbanboard=this.webpackJsonpkanbanboard||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(27),i=n.n(r),c=n(105),o=n(16),d=n(192),l=n(36),s=n(20),u=n(195),j=n(193),b=n(199),x=n(200),f=n(201),h=n(59),m=n(194),p=n(186),O=n(185),g=n(196),v=n(181),C=n(191),y=n(198),w=n(188),S=n(1),I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column"},k=function(e){var t=e.data,n=e.editCard,r=a.useState(!1),i=Object(o.a)(r,2),c=i[0],d=i[1],l=Object(a.useRef)(),s=function(){return d(!1)},b=a.useState("pending"),x=Object(o.a)(b,2),f=x[0],h=x[1],k=a.useState(t.state),P=Object(o.a)(k,2),R=P[0],T=P[1],D=Object(a.useRef)(),E=Object(a.useRef)();return Object(S.jsxs)("div",{display:"block",children:[Object(S.jsx)(j.a,{onClick:function(){d(!0)},size:"small",children:"Edit"}),Object(S.jsx)(p.a,{open:c,onClose:s,"aria-labelledby":"modal-modal-title",children:Object(S.jsxs)(m.a,{sx:I,children:[Object(S.jsx)(u.a,{id:"modal-modal-title",variant:"h5",sx:{mb:"1rem",mt:"1rem"},children:"Edit Card"}),Object(S.jsx)(O.a,{sx:{my:"1rem"},label:"Title",type:"text",inputRef:D,required:!0,defaultValue:t.title,onChange:function(){f||h(!0)},error:!f})," ",Object(S.jsx)(O.a,{sx:{my:"1rem"},label:"Description",type:"text",defaultValue:t.description,inputRef:l}),Object(S.jsxs)(g.a,{component:"fieldset",children:[Object(S.jsx)(v.a,{component:"legend",children:"Status"}),Object(S.jsxs)(C.a,{row:!0,"aria-label":"status",name:"row-radio-buttons-group",onChange:function(e,t){T(t)},value:R,children:[Object(S.jsx)(y.a,{value:"Pending",control:Object(S.jsx)(w.a,{}),label:"Pending"}),Object(S.jsx)(y.a,{value:"Progress",control:Object(S.jsx)(w.a,{}),label:"In Progress"}),Object(S.jsx)(y.a,{value:"Done",control:Object(S.jsx)(w.a,{}),label:"Done"}),Object(S.jsx)(y.a,{value:"Postponed",control:Object(S.jsx)(w.a,{}),label:"Postponed"})]})]}),Object(S.jsx)(O.a,{id:"date",type:"date",defaultValue:t.deadline,inputRef:E,sx:{width:220,my:"1rem"}}),Object(S.jsx)(j.a,{sx:{my:"1rem"},variant:"outlined",color:"secondary",onClick:function(){D.current.value.length<=0?h(!1):(n(t.id,[D.current.value,l.current.value,E.current.value,R]),s())},children:"Save"})]})})]})},P=n(197),R=function(e){var t=e.data,n=e.removeCard,a=e.index,r=e.editCard,i=function(e){switch(e){case"Pending":return"#b28704";case"Postponed":return"#aa2e25";case"Progress":return"#482880";case"Done":return"#357a38";default:return"grey"}};return Object(S.jsx)(h.b,{draggableId:t.id.toString(),index:a,children:function(e){return Object(S.jsxs)(b.a,Object(l.a)(Object(l.a)(Object(l.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,sx:{maxWidth:"100%",marginTop:"1rem"},children:[Object(S.jsxs)(x.a,{children:[Object(S.jsx)(P.a,{elevation:0,sx:{width:"fit-content",background:i(t.state)},children:Object(S.jsx)(u.a,{sx:{fontSize:14,padding:"5px",fontWeight:"bold"},color:"text.secondary",gutterBottom:!0,children:t.state})}),Object(S.jsx)(u.a,{variant:"h5",component:"div",sx:{wordBreak:"break-all"},children:t.title}),Object(S.jsx)(u.a,{sx:{mb:1.5,wordBreak:"break-all"},color:"text.secondary",children:t.description}),Object(S.jsx)(u.a,{variant:"body2",children:t.deadline})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(j.a,{onClick:function(){n(t.id)},size:"small",children:"Remove"}),Object(S.jsx)(k,{data:t,editCard:r})]})]}))}},t.id)},T=n(114),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column"},E=function(e){var t=e.data,n=e.addCard,r=a.useState(!1),i=Object(o.a)(r,2),c=i[0],d=i[1],l=function(){return d(!1)},s=a.useState("pending"),b=Object(o.a)(s,2),x=b[0],f=b[1],h="Pending",I=a.useState(h),k=Object(o.a)(I,2),P=k[0],R=k[1],E=Object(a.useRef)(),B=Object(a.useRef)(),J=Object(a.useRef)();return Object(S.jsxs)("div",{display:"block",children:[Object(S.jsx)(j.a,{variant:"contained",onClick:function(){return d(!0)},children:"New card"}),Object(S.jsx)(p.a,{open:c,onClose:l,"aria-labelledby":"modal-modal-title",children:Object(S.jsxs)(m.a,{sx:D,children:[Object(S.jsx)(u.a,{id:"modal-modal-title",variant:"h5",sx:{mb:"1rem",mt:"1rem"},children:"Add new Card"}),Object(S.jsx)(O.a,{sx:{my:"1rem"},label:"Title",type:"text",inputRef:E,required:!0,onChange:function(){x||f(!0)},error:!x})," ",Object(S.jsx)(O.a,{sx:{my:"1rem"},label:"Description",type:"text",inputRef:J}),Object(S.jsxs)(g.a,{component:"fieldset",children:[Object(S.jsx)(v.a,{component:"legend",children:"Status"}),Object(S.jsxs)(C.a,{row:!0,"aria-label":"status",name:"row-radio-buttons-group",onChange:function(e,t){R(t)},defaultValue:h,children:[Object(S.jsx)(y.a,{value:"Pending",control:Object(S.jsx)(w.a,{}),label:"Pending"}),Object(S.jsx)(y.a,{value:"Progress",control:Object(S.jsx)(w.a,{}),label:"In Progress"}),Object(S.jsx)(y.a,{value:"Done",control:Object(S.jsx)(w.a,{}),label:"Done"}),Object(S.jsx)(y.a,{value:"Postponed",control:Object(S.jsx)(w.a,{}),label:"Postponed"})]})]}),Object(S.jsx)(O.a,{id:"date",type:"date",defaultValue:Object(T.a)(new Date,"yyyy-MM-dd"),inputRef:B,sx:{width:220,my:"1rem"}}),Object(S.jsx)(j.a,{sx:{my:"1rem"},variant:"outlined",color:"secondary",onClick:function(){E.current.value.length<=0?f(!1):(n(t.id,E.current.value,J.current.value,B.current.value,P),l())},children:"Add Card"})]})})]})},B=n(110),J=n.n(B),N=function(e){var t=e.addCard,n=e.removeCard,a=e.data,r=e.editCard,i=e.removeCol,c=function(e){n(a.id,e)},o=function(e,t){r.apply(void 0,[a.id,e].concat(Object(s.a)(t)))};return Object(S.jsxs)(d.a,{item:!0,container:!0,direction:"column",xs:6,md:6,lg:3,xl:2,sx:{padding:"1rem"},children:[Object(S.jsx)(d.a,{item:!0,children:Object(S.jsx)(u.a,{variant:"h4",align:"center",children:a.title})}),Object(S.jsxs)(d.a,{item:!0,container:!0,direction:"row",justifyContent:"space-between",sx:{paddingTop:"1rem"},children:[Object(S.jsx)(E,{addCard:t,data:a,sx:{marginBottom:"1rem"}}),Object(S.jsx)(j.a,{"aria-label":"delete",onClick:function(){i(a.id)},variant:"outlined",startIcon:Object(S.jsx)(J.a,{fontSize:"inherit"}),children:"Remove"})]}),Object(S.jsx)(d.a,{item:!0,children:Object(S.jsx)(h.c,{droppableId:a.id.toString(),children:function(e){return Object(S.jsxs)("div",Object(l.a)(Object(l.a)({ref:e.innerRef},e.droppableProps),{},{children:[a.cards.map((function(e,t){return Object(S.jsx)(R,{data:e,removeCard:c,index:t,editCard:o},e.id)})),e.placeholder]}))}})})]})},A=function(e){var t=e.columns,n=e.addCard,a=e.removeCard,r=e.cardColSwitch,i=e.editCard,c=e.removeCol;return Object(S.jsx)(d.a,{container:!0,direction:"row",item:!0,children:t.map((function(e,t){return Object(S.jsx)(N,{data:e,addCard:n,removeCard:a,cardColSwitch:r,editCard:i,removeCol:c},t)}))})},V=n(111),z=n.n(V),q=n(202),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column"},M=function(e){var t=e.addColumn,n=a.useState(!1),r=Object(o.a)(n,2),i=r[0],c=r[1],d=a.useState(!0),l=Object(o.a)(d,2),s=l[0],b=l[1],x=function(){return c(!1)},f=Object(a.useRef)("");return Object(S.jsxs)("div",{children:[Object(S.jsxs)(q.a,{variant:"extended","aria-label":"add",onClick:function(){return c(!0)},color:"secondary",children:[Object(S.jsx)(z.a,{}),"New Column"]}),Object(S.jsx)(p.a,{open:i,onClose:x,"aria-labelledby":"modal-modal-title",children:Object(S.jsxs)(m.a,{sx:L,children:[Object(S.jsx)(u.a,{id:"modal-modal-title",variant:"h5",sx:{mt:"1rem",padding:0},children:"Add new column"}),Object(S.jsx)(O.a,{sx:{my:"1rem"},id:"outlined-title-input",label:"Title",type:"text",inputRef:f,required:!0,onChange:function(){s||b(!0)},error:!s}),Object(S.jsx)(j.a,{sx:{my:"1rem"},variant:"outlined",color:"secondary",onClick:function(){f.current.value.length>0?(t(f.current.value),x()):b(!1)},children:"Add Column"})]})})]})},U=function(e){var t=e.addColumn;return Object(S.jsxs)(d.a,{item:!0,xs:12,container:!0,direction:"column",sx:{marginBottom:"1rem"},children:[Object(S.jsx)(d.a,{item:!0,children:Object(S.jsx)(u.a,{variant:"h2",align:"center",sx:{marginTop:"3rem",marginBottom:"3rem"},children:"Kanban Board"})}),Object(S.jsx)(M,{addColumn:t}),Object(S.jsx)(d.a,{item:!0})]})};var W=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),l=Object(o.a)(i,2),s=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),x=b[0],f=b[1],m="http://localhost:5000",p=function(e){if(e.ok)return e.json();throw new Error("Something went wrong")},O=function(e){if(e.ok)return e;throw new Error("Something went wrong")};return Object(a.useEffect)((function(){fetch(m+"/api/column/board/").then((function(e){return p(e)})).then((function(e){u(!0);var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.cards.sort((function(e,t){return e.position-t.position}))}}catch(a){n.e(a)}finally{n.f()}r(e)}),(function(e){f(!0),console.log(e)}))}),[]),x?Object(S.jsx)("h1",{children:"Error occured, please refresh"}):s?Object(S.jsx)(h.a,{onDragEnd:function(e){if(e.destination){var t=parseInt(e.source.droppableId),a=parseInt(e.destination.droppableId),i=parseInt(e.draggableId),c=n.slice(),o=c.findIndex((function(e){return e.id===t})),d=c.findIndex((function(e){return e.id===a})),l=c[o].cards.findIndex((function(e){return e.id===i})),s=c[o].cards[l];c[o].cards.splice(l,1),c[d].cards.splice(e.destination.index,0,s),r(c),fetch(m+"/api/card/"+i+"/location/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardId:i,newColId:a,newPos:e.destination.index})}).then((function(e){200!==e.status&&f(!0)}),(function(e){console.log(e),f(!0)}))}},children:Object(S.jsx)(d.a,{container:!0,alignItems:"center",justifyContent:"center",children:Object(S.jsxs)(d.a,{item:!0,container:!0,xs:10,alignItems:"center",justifyContent:"center",children:[Object(S.jsx)(U,{addColumn:function(e){fetch(m+"/api/column/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})}).then((function(e){return p(e)})).then((function(e){var t=n.slice();t.push({id:e.id,title:e.title,cards:[]}),r(t)}),(function(e){console.log(e),f(!0)}))}}),Object(S.jsx)(A,{columns:n,addCard:function(e,t,a,i,c){fetch(m+"/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({columnId:e,title:t,description:a,deadline:i,state:c})}).then((function(e){return p(e)})).then((function(o){var d=n.slice(),l=d.findIndex((function(t){return t.id===e}));d[l].cards.push({columnId:e,id:o.id,title:t,description:a,deadline:i,state:c}),r(d)}),(function(e){console.log(e),f(!0)}))},removeCard:function(e,t){fetch(m+"/api/card/"+t,{method:"DELETE"}).then((function(e){return O(e)})).then((function(a){if(200===a.status){var i=n.slice(),c=i.findIndex((function(t){return t.id===e})),o=i[c].cards.findIndex((function(e){return e.id===t}));o>-1&&i[c].cards.splice(o,1),r(i)}else f(!0)}),(function(e){console.log(e),f(!0)}))},editCard:function(e,t,a,i,c,o){fetch(m+"/api/card/"+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,title:a,description:i,deadline:c,state:o})}).then((function(e){return p(e)})).then((function(e){e.id!==t&&f(!0)}),(function(e){console.log(e),f(!0)}));var d=n.slice(),l=d.findIndex((function(t){return t.id===e})),s=d[l].cards.findIndex((function(e){return e.id===t}));s>-1&&(d[l].cards[s].title=a,d[l].cards[s].description=i,d[l].cards[s].deadline=c,d[l].cards[s].state=o),r(d)},removeCol:function(e){fetch(m+"/api/column/"+e,{method:"DELETE"}).then((function(e){return O(e)})).then((function(){var t=n.slice(),a=t.findIndex((function(t){return t.id===e}));t.splice(a,1),r(t)}),(function(e){console.log(e),f(!0)}))}})]})})}):Object(S.jsx)("h1",{children:"Loading..."})},H=n(113),K=n(190),F=n(183),G=n(184),Q=n(182),X=Object(H.a)({palette:{mode:"dark"}});i.a.render(Object(S.jsx)(K.a,{theme:X,children:Object(S.jsxs)(Q.a,{dateAdapter:G.a,children:[Object(S.jsx)(F.a,{}),Object(S.jsx)(W,{})]})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.b58430d5.chunk.js.map